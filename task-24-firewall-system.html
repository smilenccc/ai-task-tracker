<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»»å‹™ #24 - é˜²ç«ç‰†ç®¡ç†ç³»çµ±å»ºç«‹</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft JhengHei', Arial, sans-serif;
            background: #1a1d23;
            color: #e5e7eb;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .back-btn {
            background: #d50c2d;
            color: white;
            padding: 12px 24px;
            border-radius: 4px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 30px;
        }
        h1 { font-size: 2.5em; margin-bottom: 10px; color: white; }
        .meta { color: #9ca3af; margin-bottom: 30px; }
        .section {
            background: #0f1115;
            border: 1px solid #2d3138;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 20px;
        }
        .section h2 {
            color: #d50c2d;
            border-bottom: 2px solid #d50c2d;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        pre {
            background: #000;
            border: 1px solid #2d3138;
            border-radius: 4px;
            padding: 15px;
            overflow-x: auto;
            color: #0f0;
            font-size: 0.9em;
        }
        .feature {
            background: #1a1d23;
            border-left: 4px solid #10b981;
            padding: 15px;
            margin: 15px 0;
        }
        ul { margin-left: 20px; line-height: 1.8; }
        .success { color: #10b981; }
    </style>
</head>
<body>
    <div class="container">
        <a href="tasks.html" class="back-btn">â† è¿”å›ä»»å‹™åˆ—è¡¨</a>
        
        <h1>ğŸ›¡ï¸ é˜²ç«ç‰†ç®¡ç†ç³»çµ±å»ºç«‹</h1>
        <div class="meta">
            å®Œæˆæ™‚é–“ï¼š2026-02-11 00:00-16:04 | é¡åˆ¥ï¼šé–‹ç™¼ | ç‹€æ…‹ï¼šâœ… å·²å®Œæˆ
        </div>

        <div class="section">
            <h2>ğŸ“‹ ä»»å‹™èƒŒæ™¯</h2>
            <p>ä¸»äººçš„å…¬å¸ IP å¯èƒ½æœƒè®Šå‹•ï¼ˆSIM å¡ routerï¼‰ï¼Œéœ€è¦ä¸€å€‹æ–¹ä¾¿çš„ç™½åå–®ç®¡ç†ç³»çµ±ï¼Œè®“ä¸»äººéš¨æ™‚èƒ½å¾ä¸åŒä½ç½®å®‰å…¨é€£ç·šåˆ° VPSã€‚</p>
        </div>

        <div class="section">
            <h2>âœ¨ åŠŸèƒ½ç‰¹è‰²</h2>
            
            <div class="feature">
                <h3>1. CLI ç®¡ç†å·¥å…·</h3>
                <p>Python è…³æœ¬æä¾›å®Œæ•´çš„é˜²ç«ç‰†è¦å‰‡ç®¡ç†</p>
                <pre>python3 manager.py add 1.2.3.4      # åŠ å…¥ç™½åå–®
python3 manager.py remove 1.2.3.4   # ç§»é™¤
python3 manager.py list             # æŸ¥çœ‹åˆ—è¡¨</pre>
            </div>

            <div class="feature">
                <h3>2. 2FA ç¶²é ä»‹é¢</h3>
                <p>ä½¿ç”¨ TOTPï¼ˆAuthyï¼‰èªè­‰çš„å®‰å…¨ç¶²é ç®¡ç†ä»‹é¢</p>
                <ul>
                    <li>è¨ªå•ï¼šhttp://157.180.126.133:5000</li>
                    <li>Flask + RESTful API</li>
                    <li>æœƒè©±ç®¡ç†ï¼ˆ1å°æ™‚æœ‰æ•ˆæœŸï¼‰</li>
                    <li>éŸ¿æ‡‰å¼ç¶²é è¨­è¨ˆ</li>
                </ul>
            </div>

            <div class="feature">
                <h3>3. Telegram è‡ªç„¶èªè¨€æ§åˆ¶</h3>
                <p>æœ€æ–¹ä¾¿çš„æ–¹å¼ï¼ç›´æ¥è·Ÿ Linda èªªè©±å°±èƒ½ç®¡ç†</p>
                <pre>"Lindaï¼ŒåŠ å…¥ç™½åå–® 1.2.3.4"
"æˆ‘çš„æ–° IP æ˜¯ X.X.X.Xï¼Œè«‹åŠ å…¥"
"ç§»é™¤ç™½åå–® 1.2.3.4"
"æŸ¥çœ‹ç™½åå–®"</pre>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ› ï¸ å¯¦æ–½ç´°ç¯€</h2>
            
            <h3>ç³»çµ±æ¶æ§‹</h3>
            <pre>/root/.openclaw/workspace/firewall/
â”œâ”€â”€ manager.py           # CLI ä¸»ç¨‹å¼
â”œâ”€â”€ api_server.py        # Flask API Server
â”œâ”€â”€ auth_manager.py      # 2FA èªè­‰ç®¡ç†
â”œâ”€â”€ telegram_handler.py  # Telegram æ•´åˆ
â”œâ”€â”€ web/
â”‚   â””â”€â”€ index.html      # ç¶²é ä»‹é¢
â””â”€â”€ logs/
    â””â”€â”€ firewall.log    # æ“ä½œæ—¥èªŒï¼ˆJSONï¼‰</pre>

            <h3>æ ¸å¿ƒåŠŸèƒ½</h3>
            <pre># åŠ å…¥ç™½åå–®
def add_ip(ip, ports="22,80,443"):
    # 1. é©—è­‰ IP æ ¼å¼
    # 2. æª¢æŸ¥æ˜¯å¦å·²å­˜åœ¨
    # 3. é€ä¸€åŠ å…¥ iptables è¦å‰‡
    # 4. è¨˜éŒ„æ—¥èªŒ
    # 5. è¿”å›æˆåŠŸè¨Šæ¯

# ç§»é™¤ç™½åå–®  
def remove_ip(ip):
    # 1. æŸ¥æ‰¾å°æ‡‰è¦å‰‡
    # 2. åˆªé™¤ iptables è¦å‰‡
    # 3. è¨˜éŒ„æ—¥èªŒ</pre>
        </div>

        <div class="section">
            <h2>âœ… æˆæœ</h2>
            <ul class="success">
                <li>âœ“ CLI å·¥å…·å®Œæˆä¸¦æ¸¬è©¦</li>
                <li>âœ“ 2FA ç¶²é ä»‹é¢ä¸Šç·šï¼ˆport 5000ï¼‰</li>
                <li>âœ“ Telegram è‡ªç„¶èªè¨€æ•´åˆ</li>
                <li>âœ“ æ“ä½œæ—¥èªŒå®Œæ•´è¨˜éŒ„</li>
                <li>âœ“ ä¸‰ç¨®ç®¡ç†æ–¹å¼ä¸¦è¡Œ</li>
            </ul>
        </div>

        <div class="section">
            <h2>ğŸ“Š ç›®å‰ç™½åå–®</h2>
            <ul>
                <li>39.10.61.157 - å…¬å¸ï¼ˆå°ç£-é å‚³ï¼‰</li>
                <li>106.105.89.219 - å®¶è£¡ï¼ˆå°ç£-æ–°ä¸–ç´€ï¼‰</li>
                <li>113.200.148.218 - å…¶ä»–ä½ç½®ï¼ˆä¸­åœ‹-è¯é€šï¼‰</li>
                <li>100.0.0.0/8 - Tailscale VPNï¼ˆæ°¸é å…è¨±ï¼‰</li>
            </ul>
        </div>

        <div class="section">
            <h2>ğŸ”§ ä½¿ç”¨æŒ‡å—</h2>
            
            <h3>æ–¹æ³• 1ï¼šTelegramï¼ˆæ¨è–¦ï¼‰</h3>
            <pre>ç›´æ¥å° Linda èªªï¼š
"Lindaï¼ŒåŠ å…¥ç™½åå–® 106.105.89.219"
"æŸ¥çœ‹ç™½åå–®"</pre>

            <h3>æ–¹æ³• 2ï¼šç¶²é ä»‹é¢</h3>
            <pre>1. è¨ªå• https://smilelinda.duckdns.org/firewall/
2. è¼¸å…¥ Authy 6 ä½æ•¸é©—è­‰ç¢¼
3. é»æ“Šæ“ä½œ</pre>

            <h3>æ–¹æ³• 3ï¼šSSH å‘½ä»¤è¡Œ</h3>
            <pre>cd /root/.openclaw/workspace/firewall
python3 manager.py add 1.2.3.4
python3 manager.py list</pre>
        </div>

        <div class="section">
            <h2>ğŸ“ ç›¸é—œæª”æ¡ˆ</h2>
            <ul>
                <li><code>/root/.openclaw/workspace/firewall/</code> - ç³»çµ±ç›®éŒ„</li>
                <li><code>logs/firewall.log</code> - æ“ä½œæ—¥èªŒ</li>
                <li><code>auth_config.json</code> - 2FA è¨­å®š</li>
                <li><code>README.md</code> - å®Œæ•´æ–‡ä»¶</li>
            </ul>
        </div>

        <div class="section">
            <h2>ğŸ”’ å®‰å…¨ç‰¹æ€§</h2>
            <ul>
                <li>âœ“ 2FA é›™é‡èªè­‰ï¼ˆTOTPï¼‰</li>
                <li>âœ“ æœƒè©±è¶…æ™‚æ©Ÿåˆ¶ï¼ˆ1å°æ™‚ï¼‰</li>
                <li>âœ“ æ‰€æœ‰æ“ä½œè¨˜éŒ„æ—¥èªŒ</li>
                <li>âœ“ IP æ ¼å¼é©—è­‰</li>
                <li>âœ“ é‡è¤‡æª¢æŸ¥é¿å…è¡çª</li>
            </ul>
        </div>
    </div>
</body>
</html>

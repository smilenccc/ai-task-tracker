# 📦 Amazon 包裹地圖追蹤功能

## 🎯 功能說明

在主 Dashboard 地圖上視覺化顯示 Amazon 包裹的物流路徑和目前位置。

## 🗺️ 地圖標記

### 1. 起點：Amazon.de 倉庫
- **位置：** 德國法蘭克福 (50.1109°N, 8.6821°E)
- **圖示：** 🏭 Amazon.de 倉庫
- **顏色：** 橙色 (#ff9900)
- **說明：** 包裹出發地

### 2. 中轉點：ECMS 物流中心（目前位置）
- **位置：** 上海 (31.2304°N, 121.4737°E)
- **圖示：** 🚛 ECMS 物流中心 📦
- **顏色：** 藍色 (#3b82f6)
- **動畫：** 脈衝效果（表示包裹目前位置）
- **狀態：** 已發貨 (Dispatched)
- **說明：** 包裹已到達物流中心

### 3. 終點：收件地址
- **位置：** 台中市大里區 (24.0992°N, 120.6839°E)
- **圖示：** 🏠 收件地址
- **顏色：** 綠色 (#10b981)
- **說明：** Smile Huang

## 📍 路徑線條

### 已完成路徑（德國 → 物流中心）
- **線條類型：** 實線
- **顏色：** 綠色 (#10b981)
- **粗細：** 3px
- **箭頭：** 12px 箭頭指向物流中心
- **意義：** 包裹已完成此段運送

### 進行中路徑（物流中心 → 台中）
- **線條類型：** 虛線 (10px dash, 10px gap)
- **顏色：** 橙色 (#f59e0b)
- **粗細：** 3px
- **箭頭：** 12px 箭頭指向台中
- **意義：** 包裹預計運送路徑

## 🎨 地圖圖例

在地圖右上方顯示：
- ━━ 已完成路徑（綠色實線）
- ┄┄ 運送中（橙色虛線）
- ● 包裹位置（藍色圓點，脈衝動畫）

## 🔗 互動功能

### 彈出視窗 (Popup)

**起點標記點擊：**
```
Amazon.de 倉庫
德國法蘭克福
訂單: 303-0977485-2042700
```

**目前位置標記（自動開啟）：**
```
📦 包裹目前位置
已到達物流中心
追蹤號: AXIXPPL001333550
狀態: 已發貨 (Dispatched)
```

**終點標記點擊：**
```
收件地址
台中市大里區
Smile Huang
```

## 📊 地圖視角

- **自動調整：** 地圖會自動縮放以顯示完整路徑
- **邊距：** 四周留 50px 邊距
- **初始焦點：** 包裹目前位置（物流中心）

## 🔄 動態更新

當包裹狀態變更時，地圖會自動更新：

1. **Out for Delivery（配送中）**
   - 中轉點標記移動到台灣本地物流中心
   - 物流中心→台中路徑變成實線綠色

2. **Delivered（已送達）**
   - 所有路徑變成綠色實線
   - 終點標記顯示送達時間
   - 移除脈衝動畫

## 🎯 使用場景

1. **快速查看包裹位置**
   - 開啟 Dashboard 立即看到包裹在哪裡
   
2. **了解運送進度**
   - 綠色實線：已完成
   - 橙色虛線：待完成

3. **預估送達時間**
   - 根據路徑距離和目前位置推測

## 📱 響應式設計

- 手機版：地圖縮小但保持完整路徑可見
- 平板版：最佳顯示效果
- 桌面版：完整細節展示

## 🛠️ 技術實現

- **地圖庫：** Leaflet.js 1.9.4
- **圖層：** CartoDB Dark Theme
- **裝飾：** Leaflet PolylineDecorator（箭頭）
- **動畫：** CSS @keyframes pulse
- **資料：** 即時同步 `package_status.json`

---

**建立時間：** 2026-02-10 03:50 UTC  
**訂單號：** 303-0977485-2042700  
**追蹤號：** AXIXPPL001333550

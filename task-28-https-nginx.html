<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»»å‹™ #28 - HTTPS åŠ å¯†èˆ‡ Nginx åå‘ä»£ç†</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft JhengHei', Arial, sans-serif;
            background: #1a1d23;
            color: #e5e7eb;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .back-btn {
            background: #d50c2d;
            color: white;
            padding: 12px 24px;
            border-radius: 4px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 30px;
        }
        h1 { font-size: 2.5em; margin-bottom: 10px; color: white; }
        .meta { color: #9ca3af; margin-bottom: 30px; }
        .section {
            background: #0f1115;
            border: 1px solid #2d3138;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 20px;
        }
        .section h2 {
            color: #d50c2d;
            border-bottom: 2px solid #d50c2d;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        pre {
            background: #000;
            border: 1px solid #2d3138;
            border-radius: 4px;
            padding: 15px;
            overflow-x: auto;
            color: #0f0;
            font-size: 0.9em;
        }
        .step {
            background: #1a1d23;
            border-left: 4px solid #d50c2d;
            padding: 15px;
            margin: 15px 0;
        }
        .success { color: #10b981; }
        .warning { color: #f59e0b; }
        ul { margin-left: 20px; line-height: 1.8; }
    </style>
</head>
<body>
    <div class="container">
        <a href="tasks.html" class="back-btn">â† è¿”å›ä»»å‹™åˆ—è¡¨</a>
        
        <h1>ğŸ”’ HTTPS åŠ å¯†èˆ‡ Nginx åå‘ä»£ç†</h1>
        <div class="meta">
            å®Œæˆæ™‚é–“ï¼š2026-02-12 09:49-09:52 | é¡åˆ¥ï¼šé–‹ç™¼ | ç‹€æ…‹ï¼šâœ… å·²å®Œæˆ
        </div>

        <div class="section">
            <h2>ğŸ“‹ ä»»å‹™ç›®æ¨™</h2>
            <p>æå‡ç¶²ç«™å®‰å…¨æ€§èˆ‡ä½¿ç”¨é«”é©—ï¼Œå°‡æ‰€æœ‰æœå‹™æ•´åˆåˆ°çµ±ä¸€å…¥å£ï¼Œç§»é™¤ç«¯å£è™Ÿã€‚</p>
            <ul>
                <li>å®‰è£ Let's Encrypt SSL æ†‘è­‰</li>
                <li>è¨­å®š Nginx åå‘ä»£ç†</li>
                <li>ç°¡åŒ–ç¶²å€ï¼ˆç§»é™¤ç«¯å£è™Ÿï¼‰</li>
                <li>è‡ªå‹•æ†‘è­‰æ›´æ–°</li>
            </ul>
        </div>

        <div class="section">
            <h2>ğŸ› ï¸ å¯¦æ–½æ­¥é©Ÿ</h2>
            
            <div class="step">
                <h3>æ­¥é©Ÿ 1ï¼šå®‰è£ Nginx</h3>
                <pre>apt-get update && apt-get install -y nginx
systemctl start nginx
systemctl enable nginx</pre>
            </div>

            <div class="step">
                <h3>æ­¥é©Ÿ 2ï¼šé–‹æ”¾é˜²ç«ç‰†ç«¯å£</h3>
                <pre>/usr/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT
/usr/sbin/iptables -I INPUT -p tcp --dport 443 -j ACCEPT
/usr/sbin/iptables-save > /etc/iptables/rules.v4</pre>
            </div>

            <div class="step">
                <h3>æ­¥é©Ÿ 3ï¼šè¨­å®š Nginx åå‘ä»£ç†</h3>
                <p>å»ºç«‹é…ç½®æª”ï¼š<code>/etc/nginx/sites-available/smilelinda.conf</code></p>
                <pre>server {
    listen 80;
    server_name smilelinda.duckdns.org;
    
    location / {
        proxy_pass http://localhost:8100;
    }
    
    location /coupang/ {
        proxy_pass http://localhost:8101/;
    }
    
    location /credit-card/ {
        proxy_pass http://localhost:8102/;
    }
    
    # ... å…¶ä»–æœå‹™
}</pre>
            </div>

            <div class="step">
                <h3>æ­¥é©Ÿ 4ï¼šå®‰è£ Let's Encrypt</h3>
                <pre>apt-get install -y certbot python3-certbot-nginx
ln -sf /usr/sbin/nginx /usr/bin/nginx
certbot --nginx -d smilelinda.duckdns.org \\
    --non-interactive --agree-tos \\
    --email linda.openclaw@gmail.com --redirect</pre>
            </div>

            <div class="step">
                <h3>æ­¥é©Ÿ 5ï¼šä¿®æ­£ Tailscale ç«¯å£è¡çª</h3>
                <pre>tailscale serve off
systemctl reload nginx</pre>
            </div>
        </div>

        <div class="section">
            <h2>âœ… æˆæœ</h2>
            <ul>
                <li class="success">âœ“ HTTPS æ†‘è­‰å®‰è£æˆåŠŸï¼ˆæœ‰æ•ˆæœŸè‡³ 2026-05-13ï¼‰</li>
                <li class="success">âœ“ è‡ªå‹•æ›´æ–°è¨­å®šå®Œæˆï¼ˆcertbot.timerï¼‰</li>
                <li class="success">âœ“ HTTP è‡ªå‹•è·³è½‰ HTTPSï¼ˆ301 Redirectï¼‰</li>
                <li class="success">âœ“ æ‰€æœ‰æœå‹™çµ±ä¸€å…¥å£</li>
                <li class="success">âœ“ ç¶²å€å¤§å¹…ç°¡åŒ–</li>
            </ul>
        </div>

        <div class="section">
            <h2>ğŸ”— ç¶²å€å°ç…§è¡¨</h2>
            <table style="width: 100%; border-collapse: collapse; color: #e5e7eb;">
                <tr style="background: #2d3138;">
                    <th style="padding: 10px; border: 1px solid #444;">æœå‹™</th>
                    <th style="padding: 10px; border: 1px solid #444;">èˆŠç¶²å€</th>
                    <th style="padding: 10px; border: 1px solid #444;">æ–°ç¶²å€</th>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #444;">Task Tracker</td>
                    <td style="padding: 10px; border: 1px solid #444;">http://smilelinda.duckdns.org:8100</td>
                    <td style="padding: 10px; border: 1px solid #444; color: #10b981;">https://smilelinda.duckdns.org/</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #444;">Coupang</td>
                    <td style="padding: 10px; border: 1px solid #444;">http://smilelinda.duckdns.org:8101</td>
                    <td style="padding: 10px; border: 1px solid #444; color: #10b981;">https://smilelinda.duckdns.org/coupang/</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #444;">ä¿¡ç”¨å¡çµ±è¨ˆ</td>
                    <td style="padding: 10px; border: 1px solid #444;">http://smilelinda.duckdns.org:8102</td>
                    <td style="padding: 10px; border: 1px solid #444; color: #10b981;">https://smilelinda.duckdns.org/credit-card/</td>
                </tr>
            </table>
        </div>

        <div class="section">
            <h2>ğŸ“ ç›¸é—œæª”æ¡ˆ</h2>
            <ul>
                <li><code>/etc/nginx/sites-available/smilelinda.conf</code> - Nginx é…ç½®</li>
                <li><code>/etc/letsencrypt/live/smilelinda.duckdns.org/</code> - SSL æ†‘è­‰</li>
                <li><code>/etc/iptables/rules.v4</code> - é˜²ç«ç‰†è¦å‰‡</li>
                <li><code>/root/.openclaw/workspace/UPGRADE_REPORT.md</code> - å‡ç´šå ±å‘Š</li>
            </ul>
        </div>

        <div class="section">
            <h2>ğŸ”§ ç¶­è­·æŒ‡ä»¤</h2>
            <pre># æª¢æŸ¥ Nginx ç‹€æ…‹
systemctl status nginx

# æ¸¬è©¦é…ç½®
nginx -t

# é‡æ–°è¼‰å…¥
systemctl reload nginx

# æ‰‹å‹•æ›´æ–°æ†‘è­‰
certbot renew

# æŸ¥çœ‹æ†‘è­‰ç‹€æ…‹
systemctl status certbot.timer</pre>
        </div>
    </div>
</body>
</html>
